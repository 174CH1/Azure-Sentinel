{
    "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
    "handler": "Microsoft.Azure.CreateUIDef",
    "version": "0.1.2-preview",
    "parameters": {
        "config": {
            "isWizard": true,
            "basics": {
                "description": "<img src=\"https://raw.githubusercontent.com/SecureHats/Sentinel-playground/main/media/securehats-banner-small.png\">\n\n**Azure Sentinel Playground** deployment, more information about this project [here](https://github.com/SecureHats/Sentinel-playground/).\n\n_**Information:** The Azure Sentinel Playground Solution is in active development. This feature is provided without a service level agreement, and it's not recommended for production workloads. Certain features might not be supported or might have constrained capabilities._\n\nThe SecureHats Sentinel Playground provide a consolidated way to provision Azure Sentinel with content like data connectors, workbooks, analytics, and automations in your workspace with a single deployment step.\n\nIt takes around 15 minutes to see the custom data appear in LogAnalytics.\n\nIn order to upload the sample data, the deployment template uses an ARM deployment script which requires a user assigned identity. You will see this resource in your resource group when the deployment finishes.\nYou can remove after deployment if desired.\n\n[Learn more about Azure Sentinel](https://aka.ms/azuresentinel)"      
            }
        },
        "basics": [],
        "steps": [
            {
				"name": "Sentinel",
				"label": "Microsoft Sentinel",
				"elements": [
					{
						"name": "text1",
						"type": "Microsoft.Common.InfoBox",
						"visible": true,
						"options": {
							"icon": "warning",
							"text": "The Sentinel Workspace must be located in the same resource group as the deployment",
							"uri": "https://www.microsoft.com"
						}
					},
					{
						"name": "workspaceSelector",
						"type": "Microsoft.Solutions.ResourceSelector",
						"label": "Select an existing workspace",
						"resourceType": "Microsoft.OperationalInsights/workspaces",
						"options": {
							"filter": {
								"subscription": "onBasics",
								"location": "onBasics"
							}
						}
					}
				]
			},
			{
                "name": "1Password",
                "label": "1Password",
                "elements": [
                    {
                        "name": "textBlock1",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Provide the 1Password API key",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://support.1password.com/events-reporting/#appendix-issue-or-revoke-bearer-tokens"
                            }
                        }
                    },
					{
                        "name": "password",
                        "type": "Microsoft.Common.PasswordBox",
                        "label": {
                            "password": "1Password API Key"
                        },
                        "toolTip": "",
                        "constraints": {
                            "required": true,
                            "regex": "",
                            "validationMessage": ""
                        },
                        "options": {
                            "hideConfirmation": true
                        },
                        "visible": true
                    },
					{
						"name": "apiEndpoint",
						"type": "Microsoft.Common.DropDown",
						"label": "API Endpoint",
						"placeholder": "",
						"defaultValue": "events.1password.com",
						"toolTip": "",
						"constraints": {
							"allowedValues": [
								{
									"label": "1Password Business",
									"value": "https://events.1password.com"
								},
								{
									"label": "1Password Enterprise",
									"value": "https://events.ent.1password.com"
								},
								{
									"label": "1Password EU",
									"value": "https://events.1password.eu"
								},
								{
									"label": "1Password CA",
									"value": "https://events.1password.ca"
								}
							],
							"required": true
						},
						"visible": true
					}
        		]
			}
		],
        "outputs": {
            "workspaceName": "[steps('Sentinel').workspaceSelector.name]",
            "apiKey": "[steps('1Password').password]",
			"apiEndpoint": "[steps('1Password').apiEndpoint]"
        }
    }
}